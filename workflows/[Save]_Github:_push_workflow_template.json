[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-180,220],"id":"27fc4d89-8891-426e-91b1-aee584f6b5e2","name":"When clicking ‘Execute workflow’"},{"parameters":{"operation":"select","schema":{"__rl":true,"mode":"list","value":"public"},"table":{"__rl":true,"value":"workflow_entity","mode":"list","cachedResultName":"workflow_entity"},"returnAll":true,"options":{}},"type":"n8n-nodes-base.postgres","typeVersion":2.6,"position":[480,220],"id":"be9abff2-f136-41b5-9442-b0cba6e0733d","name":"Postgres","credentials":{"postgres":{"id":"irlv3piu5EYpnQnp","name":"Postgres account 3"}}},{"parameters":{"jsCode":"const out = []\n\nfor (const wf of $(\"Transform Workflows\").all()) {\n  const obj = {}\n  if (!wf.json.workflow_name.startsWith(\"[Save]\")) {\n      continue\n  }\n  obj[\"key\"] = wf.json.workflow_name.replaceAll(/\\s/g, \"_\")\n  obj[\"workflow_name\"] = wf.json.workflow_name\n  obj[\"nodes\"] = wf.json.nodes\n  out.push(obj)\n}\nreturn out"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[920,220],"id":"db5e8899-a36b-4976-a4c1-83da45b34cae","name":"Code"},{"parameters":{"assignments":{"assignments":[{"id":"d9f52694-417c-4de4-8727-859889dd4df5","name":"workflow_name","value":"={{ $json.name }}","type":"string"},{"id":"afb479d8-438d-40bf-895b-9f86178dc03b","name":"nodes","value":"={{ $json.nodes }}","type":"array"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[700,220],"id":"a4b5c98a-247b-426f-9d5a-63e82e298e3f","name":"Transform Workflows"},{"parameters":{"operation":"toText","sourceProperty":"nodes","options":{"fileName":"={{ $json.key }}"}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[1360,320],"id":"84bddd79-ba32-41b1-a268-d1ed6e3faac4","name":"Convert to File"},{"parameters":{"operation":"write","fileName":"=/resources/n8n/workflows/{{ $binary.data.fileName }}.{{ $binary.data.fileExtension }}","dataPropertyName":"=data","options":{}},"type":"n8n-nodes-base.readWriteFile","typeVersion":1,"position":[1580,395],"id":"8410ed3e-9702-4dcc-a4b0-62b1a314f10d","name":"Read/Write Files from Disk"},{"parameters":{"batchSize":"={{ $input.all().length }}","options":{"reset":false}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[1140,220],"id":"676f499f-60b2-43cc-823d-83799c2a4387","name":"Loop Over Items"},{"parameters":{"command":"ls /resources | grep \"n8n\""},"type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[40,220],"id":"38166d58-ea52-4a87-a0f4-587cf384df3c","name":"Execute Command","onError":"continueErrorOutput"},{"parameters":{"authentication":"gitPassword","operation":"clone","repositoryPath":"/resources/n8n","sourceRepository":"https://github.com/BoatPrakit/n8n"},"type":"n8n-nodes-base.git","typeVersion":1,"position":[260,320],"id":"6a4596bb-5085-4f4d-ba5a-941a9e151ec5","name":"Git","credentials":{"gitPassword":{"id":"u9oYSHhVZzXfXxRO","name":"Git account"}}},{"parameters":{"operation":"add","repositoryPath":"/resources/n8n","pathsToAdd":"/resources/n8n/workflows"},"type":"n8n-nodes-base.git","typeVersion":1,"position":[1580,20],"id":"e3d328f4-cc54-4eb3-a131-04b80c7dffde","name":"git add workflows"},{"parameters":{"operation":"pull","repositoryPath":"/resources/n8n"},"type":"n8n-nodes-base.git","typeVersion":1,"position":[260,120],"id":"80ed8b0d-0f09-490a-87c0-70e63582dcbd","name":"git pull origin"},{"parameters":{"operation":"addConfig","repositoryPath":"/resources/n8n","key":"user.name","value":"prakit.w","options":{"mode":"set"}},"type":"n8n-nodes-base.git","typeVersion":1,"position":[1360,-80],"id":"da3bde00-8e1b-4d5c-8966-13926c360fa5","name":"add config username"},{"parameters":{"operation":"addConfig","repositoryPath":"/resources/n8n","key":"user.email","value":"boatnakrub_@hotmail.com","options":{"mode":"set"}},"type":"n8n-nodes-base.git","typeVersion":1,"position":[1360,120],"id":"076ab0cd-f408-4892-b5e7-394bf68fed32","name":"add config email"},{"parameters":{"operation":"commit","repositoryPath":"/resources/n8n","message":"[Automated] Sync workflows","options":{"pathsToAdd":""}},"type":"n8n-nodes-base.git","typeVersion":1,"position":[1800,20],"id":"278aa100-11e1-4fb1-9c0f-2a7c8d6b54d0","name":"commit"},{"parameters":{"authentication":"gitPassword","operation":"push","repositoryPath":"/resources/n8n","options":{}},"type":"n8n-nodes-base.git","typeVersion":1,"position":[2020,20],"id":"dd6de2d2-4aa4-4075-864e-3a85a17a756a","name":"git push","credentials":{"gitPassword":{"id":"u9oYSHhVZzXfXxRO","name":"Git account"}}}]